<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>课件下载</title>
</head>
<body style='background: #1E1E1E;'>
    <script type="text/javascript">
        function onInputEnter(event) {
            if (event.keyCode == '13') {
                download()
            }
        }

        function download() {
           var inputValue = document.getElementById("input").value
           console.log(inputValue)
           var url = getUrl(inputValue)
           console.log(url)
           if (url === null || url === undefined || url === '') {
              alert('无效的Url，请重新输入')
              return
           }
           window.open(url)
        }

        function getUrl(rawUrl) {
            var urlHeader = 'https://preview.neixin.cn/pdf/web/viewer.html?file='
            var index = rawUrl.indexOf(urlHeader) 
            if (index > -1) {
                return decodeURIComponent(rawUrl.substr(index + urlHeader.length))
            }
            return ''
        }
    </script>
    <div style='position: absolute; display: flex; width: 95%; height: 95%; flex-direction: column; align-items: center; justify-content: space-between;'>
    <div style='display: flex; flex-direction: column; align-items: center; width: 640px; height: 100%; min-height: 580px;'>
        <p style='margin-top: 180px; font-size: 20px; color: white; font-weight: bold;'>请输入课件地址</p>
        <input style='border: 0.5px solid rgba(255, 255, 255, 0.2); border-radius: 5px; color: white; background: rgba(255, 255, 255, 0.1); width: 608px; height: 18px; padding-left: 16px; padding-right: 16px; padding-top: 8px; padding-bottom: 8px;' id='input' type='text' onkeydown='onInputEnter(event)'/>
        <button style='border-radius: 5px; width: 200px; height: 38px; margin-top: 24px; font-size: 16px; color: white; border-width: 0; background: #FF5257;' onClick='download()'>点击下载</button>
    </div>
    <p style='margin-top: -5px; font-size: 12px; color: rgba(255, 255, 255, 0.6);'>©2019 Madoka · Share with your trust.</p>
    </div>
</body>
</html>

